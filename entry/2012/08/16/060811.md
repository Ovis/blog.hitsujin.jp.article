---
Title: PT3環境の覚え書き その3
Published: 2012/08/16 6:08:11
Tags:
  - "録画環境"
---
その2までの設定で録画まではできるようになりましたがそれだけでは使えないので時間が来たら自動的に録画できるよう環境を整えます。


### EpgTimerの設定

1.      
EpgTimer.exeを起動して設定を開きます。       
基本設定→保存フォルダ       
EDCBで登録している情報が読み込まれています。スタートアップにショートカットを作成する以外やることはありません。

チューナー      
それぞれBonDriver毎にチューナー数を2に変更します。       

EPG取得は取得開始時間だけ変えておきます。深夜は取得できないことが多いので注意。

録画設定は私の場合録画マージンを多めにとっています。この場合録画用アプリの開始時間を早めにしておかないとうまくいかないことが。      
後はドロップログと番組情報を出力しないようにするくらいですかね。       

予約情報管理は      
・イベントリレーによる追従を行う       
・録画時のファイル名にPlugInを使用する       
にチェックを入れておきます。録画時のファイル名は

> $SDYYYY$$SDMM$$SDDD$ $STHH$$STMM$ $Title2$ $ServiceName$.ts

にしておきました。      
$Title2$を$Title$にすると［新］などの記号が出力されます。

その他では

- ×ボタンで最小化する
- 最小化で起動する
- 録画結果を自動的に削除する

にチェックを入れておきます。 

検索条件のデフォルト値も設定しておくと今後楽です。      
サービス絞り込みは映像サービスのみにしておくと地デジ、BS、CSすべてから検索できます。たとえ有料放送が見られない環境であっても詳細2にあるスクランブル放送の「無料番組のみ対象とする」を選択しておけば時たまある無料放送を対象にしてくれるので便利です。       


Windowsサービスでサービス登録もしておきましょう。こうすることでログインしていないときでも録画が実行されます。      

2.      
後は番組表を登録しましょう。       
TvRockはウェブ番組表だったんですがEpgTimerはビルトインされた番組表を用います。       
標準では地デジ、BS、CSの番組表が標準でありますけどもちょこっといじるとさらに使い勝手がよくなります。       
設定→番組表→表示項目からカスタマイズ表示を選択して追加をクリックします。       

カスタマイズ設定にするとデフォルト表示で表示されていた地デジ、BS、CSタブがなくなるので作ります。      
地デジを例にすると       
表示サービスにて地デジの映像のみ全追加を行います。不要なサービスがある場合は削除しておけばいいかと。

EpgTimerの番組表は表示ジャンルや検索条件を利用することで自分好みの番組表も作れます。      
私の場合アニメ、映画、新番組の番組表を作っています。       
たとえばアニメの場合表示設定はリスト表示モード、表示サービスに録画したい局番を登録し表示ジャンルでアニメに関係するジャンルを登録してしまえばOKです。  

新番組の場合表示サービスを登録した上で検索による絞り込みを行うにチェックを入れて検索キーワードに

> [新]|［新］|<新>|(新)|【新】|第0*[1一][話回]| 新$|#0*1(?!d)

と入れ正規表現モードにすればOKです。([このサイト](http://pb301.blog.fc2.com/blog-category-15.html)を参考にしました) 

<span style="font-size: medium">**こまごました設定**</span>

もうここまで行けば録画予約もできます。      
番組表をみて録画するもよし、検索して録画するもよし。自動検索予約も便利ですね。       
後は細々した設定だけしておきましょう。

1.TVTestとの連携、再生設定      
TVTestで番組を視聴していたがために録画が失敗してしまったなんてことがあったら悲しいのでEDCBとTVTestを連携させます。

あらかじめTVTestのプラグインフォルダにEpgTimerPlugIn.tvtpを追加して有効化しておきます。      
EDCBの設定→外部アプリケーション→TVTest連携を開きTVTestへのパスを登録し、視聴に利用するBonDriverを登録します。   

これでTVTestで視聴中録画が開始されたら録画が優先されるようになります。

ファイル再生タブではTVTestへのパスとコマンドライン引数を登録します。      
コマンドライン引数は

> /d BonDriver_Pipe.dll /tvtplay /nd /s "$FilePath$"

としておけばTvtPlayで再生されるため便利です。


2.TVTestの設定

TVTestで録画したときのファイル名をEDCBと同様の命名規則にします。      
私の設定だと       
%date% %hour2%%minute2% %event-name% %channel-name%.ts       
20120816 0015 今日のニュース アフリカ中央テレビ.ts という感じになります。

ついでにさかのぼり録画もできるようにしておくと少々メモリーを喰いますが便利です。      

TVTestにも番組表があるんですけどもどうせなのでEDCBのEPGデータを利用することにします。      
EpgDataCap_BonのEPGデータを利用するにチェックを入れた上でEpgDataCap_BonのSetting→EpgDataへのパスを通します。       

これで設定はすべて終わりです。

TvRockからEDCBに乗り換えて運用を始めてからちょっとたちましたがTvRockと比べて確かに初期設定は複雑なもののある程度わかっていればそれほど難しいものではなくむしろかゆいところに手が届くつくりで非常に便利ですね。EDCBは番組表をカスタマイズして自分が見たいもののジャンルだけを集めた番組リストを作ると言ったことも可能なのがありがたいです。TvRockではあらかじめジャンル分けされたものもありますがいかんせん重くて重くて・・・。      
また基本情報だけ取得にしておけばTvRockと比べて格段にEPG情報取得が早いのはやっぱり良いですね。BSCSはTvRockだと4時間とか下手したらかかるわけで。。乗り換える価値はありました。

ちなみに私は気にならなかったのでやらなかったのですが番組表に不満を覚えた場合はサードパーティ製のソフトもいくつかあるのでそちらを使うのもありかと。

