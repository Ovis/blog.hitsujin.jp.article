---
Title: PortForwarderを使って今更ながらradikoをエリア外で聞いてみた
Published: 2010/05/23 5:05:25
Tags:
  - "備忘録"
Eyecatch: ""
---
<p style="text-align: left;"><strong>注意</strong></p>
<p>追記をご覧あれ。</p>
<p>今年に入って始まったIP<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B5%A5%A4%A5%DE%A5%EB%CA%FC%C1%F7">サイマル放送</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/radiko">radiko</a>。ノイズが入らず高音質にラジオを聴けるとあって人気も高い。</p>
<p>ただ、これは東京と大阪のみ聴くことができるという視聴者からしてみたら訳のわからない制限がある。（法律や広告の兼ね合いによるものだけど）</p>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/2ch">2ch</a>では一部の人が<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%AF%A5%B7">プロクシ</a>を作ったりしてエリア外から聴けるようにしていたけど、<a class="keyword" href="http://d.hatena.ne.jp/keyword/DDoS%B9%B6%B7%E2">DDoS攻撃</a>にあったり<a class="keyword" href="http://d.hatena.ne.jp/keyword/radiko">radiko</a>側で<a class="keyword" href="http://d.hatena.ne.jp/keyword/IP%A5%A2%A5%C9%A5%EC%A5%B9">IPアドレス</a>制限をしたりしてサービス終了してしまうなどなかなか安定して使えない。</p>
<p style="text-align: left;">ならば自分で設置してみようじゃないかといろいろやってみた。</p>
<p style="text-align: left;"> </p>
<p> </p>
***



<p style="text-align: left;">まず最初に始めたのはStoneを利用したポートフォワーディング。</p>
<p><a href="http://padoo-padoo.blogspot.com/2010/03/radiko.html" target="_blank">このサイト</a>を参考にStoneを設置して動かしてみるもあえなく撃沈。うまく動かなかった。</p>
<p style="text-align: left;">次にxinetdを利用してみた。</p>
<p>いろいろいじって聴けるようになったと思ったものの、ほかの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%AF%A5%B7">プロクシ</a>が入っていたから聴けていただけで、実際のところは機能していなかったことが発覚。無念。</p>
<p style="text-align: left;">次に<a class="keyword" href="http://d.hatena.ne.jp/keyword/OpenVPN">OpenVPN</a>を入れてやってみようとしたものの、証明書など入れ方がいまいちわからず撃沈。</p>
<p style="text-align: left;">あきらめていたものの、たまたま今日ほかのようで検索していたら<a href="http://tomocha.net/diary/?201005a#201005043" target="_blank">このサイト</a>を発見。</p>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/SSH">SSH</a> PortForwarderというソフトを利用して<a class="keyword" href="http://d.hatena.ne.jp/keyword/radiko">radiko</a>が聴けるらしい。</p>
<p style="text-align: left;">まずは<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSH">SSH</a> PortForwarderをダウンロードして適当な場所に展開。今回はProgram Filesに展開した。</p>
<p style="text-align: left;">これが起動したときの画面。</p>
<p><span><img class="hatena-fotolife" title="f:id:Ovis:20140120002950g:plain" src="20140120002950.gif" alt="f:id:Ovis:20140120002950g:plain" /></span></p>
<p style="text-align: left;">ここでConfig fileの･･･ボタンをクリックしダイアログを開いて、設定ファイルを読み込む。</p>
<p>設定ファイルはサイトに書かれているものをコピペして(追記 最新版はこの記事の下)、HostNameとUserを変えるだけ。</p>
<p><span><img class="hatena-fotolife" title="f:id:Ovis:20140120002956g:plain" src="20140120002956.gif" alt="f:id:Ovis:20140120002956g:plain" /></span></p>
<p>読み込んだらHostの▽をクリックして<a class="keyword" href="http://d.hatena.ne.jp/keyword/radiko.jp">radiko.jp</a>を選択（デフォルトの場合）</p>
<p>選択したらConnectをクリック。</p>
<p><span><img class="hatena-fotolife" title="f:id:Ovis:20140120003003g:plain" src="20140120003003.gif" alt="f:id:Ovis:20140120003003g:plain" width="308" height="155" /></span></p>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/SSH">SSH</a>のUnknwon Hostがどうのとでるのではいをクリック。</p>
<p><span><img class="hatena-fotolife" title="f:id:Ovis:20140120003014g:plain" src="20140120003014.gif" alt="f:id:Ovis:20140120003014g:plain" width="307" height="121" /></span></p>
<p>OKをクリック。</p>
<p><span><img class="hatena-fotolife" title="f:id:Ovis:20140120003025g:plain" src="20140120003025.gif" alt="f:id:Ovis:20140120003025g:plain" width="309" height="127" /></span></p>
<p>指定したユーザのパスワードを入力してOKをクリック</p>
<p><span><img class="hatena-fotolife" title="f:id:Ovis:20140120003035g:plain" src="20140120003035.gif" alt="f:id:Ovis:20140120003035g:plain" /></span></p>
<p style="text-align: left;">あとはHostファイルに</p>
<p> </p>
<p> </p>
<p style="text-align: left;"><a class="keyword" href="http://d.hatena.ne.jp/keyword/127.0.0.1">127.0.0.1</a>  <a class="keyword" href="http://d.hatena.ne.jp/keyword/radiko">radiko</a>.smartstream.ne.jp</p>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/127.0.0.1">127.0.0.1</a>  www.<a class="keyword" href="http://d.hatena.ne.jp/keyword/radiko.jp">radiko.jp</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/radiko.jp">radiko.jp</a></p>
<p> </p>
<p style="text-align: left;">と書いておけば何も間違えていなければポートフォワーディングされて無事にエリア外でも<a class="keyword" href="http://d.hatena.ne.jp/keyword/radiko">radiko</a>を聴くことができるはず。</p>
<p style="text-align: left;">無論サーバが東京もしくは大阪に無ければ聴けないけどね。</p>
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/XREA">XREA</a>サーバなら大阪の放送が聴けるのかな。でも共用サーバーだと他の人に迷惑がかかる可能性もあるからおすすめはしないかな。</p>
<p style="text-align: left;">これならサーバの設定をいじることなく（<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSH">SSH</a>サーバが動いていなかったり、適切なユーザがない場合は除く）<a class="keyword" href="http://d.hatena.ne.jp/keyword/radiko">radiko</a>に接続ができて便利。</p>
<p>後は対策されないことを祈る。</p>
<p style="text-align: left;">追記＠19:45</p>
<p>このままだと<a class="keyword" href="http://d.hatena.ne.jp/keyword/radiko">radiko</a>に接続しないまま一定時間がたつと<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSH">SSH</a>が切断されてしまうことに気づいた。</p>
<p>これを迂回するには設定ファイルに</p>
<p> </p>
<blockquote style="text-align: left;">TcpKeepAlive yes</blockquote>
<p>ServerAliveCountMax 5</p>
<p>ServerAliveInterval 60</p>
<p style="text-align: left;">なんて呪文を書いておくと切断されない予感。</p>
<p style="text-align: left;">さらに追記＠07/11</p>
<p>ＸＲＥＡで試してみたらやはり大阪の放送が聴けた。</p>
<p>共用サーバではほかのユーザーに迷惑がかかりかねないのでやるならば大阪にサーバを置いているＶＰＳや専用サーバを利用するしかないかな。</p>
<p style="text-align: left;">追記×3</p>
<p>ともちゃ日記さんところの設定だと繋がらなくなってしまった。</p>
<p><a href="http://toki.2ch.net/test/read.cgi/am/1291251411/87" target="_blank">２ちゃんねるのレス</a>で有効な<a class="keyword" href="http://d.hatena.ne.jp/keyword/IP%A5%A2%A5%C9%A5%EC%A5%B9">IPアドレス</a>を知ることができたので、私の今の設定と一緒に貼り付け。</p>
<p> </p>
<p> </p>
<p style="text-align: left;"> Host <a class="keyword" href="http://d.hatena.ne.jp/keyword/radiko.jp">radiko.jp</a>（PortForwarderに表示されるタイトル）</p>
<p>HostName サーバーの<a class="keyword" href="http://d.hatena.ne.jp/keyword/IP%A5%A2%A5%C9%A5%EC%A5%B9">IPアドレス</a></p>
<p>Port <a class="keyword" href="http://d.hatena.ne.jp/keyword/SSH">SSH</a>のポート番号</p>
<p>User ユーザー名</p>
<p>TcpKeepAlive yes</p>
<p>ServerAliveCountMax 15</p>
<p>ServerAliveInterval 80</p>
<p># <a class="keyword" href="http://d.hatena.ne.jp/keyword/radiko">radiko</a>.smartstream.ne.jp</p>
<p>LocalForward 1935 219.103.34.224:1935</p>
<p>LocalForward 80 219.103.34.224:80</p>
<p># <a href="http://www.radiko.jp">www.radiko.jp</a></p>
<p>LocalForward 80 219.103.34.226:80</p>
<p>LocalForward 443 219.103.34.226:443</p>
<p>LocalForward 8935 219.103.34.226:8935</p>
<p>LocalForward 8936 219.103.34.226:8936</p>
<p>LocalForward 8937 219.103.34.226:8937</p>
<p> </p>