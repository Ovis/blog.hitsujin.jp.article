---
Title: .NET CoreでLinux環境を用いる場合、ファイルパス生成はPath.Combineを使うべき
Published: 2019/07/21 18:11:34
Tags:
  - "プログラミング"
Eyecatch: ""
---
<p>タイトルが結論。</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Linux">Linux</a>環境で動く.NET Coreアプリを書いていた時、ファイル出力処理でファイルパスを指定する際、下記のようにとりあえず記載してました。</p>

<blockquote><p> var fileName = AppDomain.CurrentDomain.BaseDirectory + @"\FolderName\fileName";</p></blockquote>

<p>想定としてはプログラムがあるフォルダにFolderNameというフォルダがあり、その中にfileNameというファイルが生成されるというもの。<br/>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>環境ではこれで問題なく動くものの、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Linux">Linux</a>環境に持っていくとファイルが出力されていなかったので確認してみると、プログラムがあるフォルダに <code>FolderName\fileName</code> という名前のファイルが。</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>環境ではパスにバックスラッシュを使うのに対し、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Linux">Linux</a>環境ではスラッシュを使うため、上記の指定だとうまくいかないと。なるほど。</p>

<p>というわけで、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Linux">Linux</a>環境で動かす場合はスラッシュに置き換えればいいんですが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>環境でも動かすことを想定すると、Path.Combineを利用してやるのが最適解のようです。</p>

<p>こんな感じ。</p>

<blockquote><p>var fileName = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "FolderName", "fileName");</p></blockquote>

<p>そもそもパスの指定方法が適当ってのは気にしないで・・・。</p>

<h5>参考</h5>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F38168391%2Fcross-platform-file-name-handling-in-net-core" title="Cross-platform file name handling in .NET Core" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

***