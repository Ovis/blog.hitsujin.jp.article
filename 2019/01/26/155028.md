---
Title: 音楽情報データベース「MusicBrainz」のAPI備忘録
Published: 2019/01/26 15:50:28
Tags:
  - "プログラミング"
  - "備忘録"
Eyecatch: ""
---
<p>音楽データベースのMusicBrainzからデータを引っ張ってくるときの備忘録。</p>

***

<p>手元にあった<a href="https://musicbrainz.org/release/69322e7c-0fef-409e-a9f6-b43d7c361398">林原めぐみのアルバム(Fifty-Fifty)</a>を例に書いています。</p>

<p><div class="hatena-asin-detail"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B0793FCVFJ/ovis91-22/"><img src="https://images-fe.ssl-images-amazon.com/images/I/51C9W-s3VtL._SL160_.jpg" class="hatena-asin-detail-image" alt="14thアルバム Fifty~Fifty 【初回限定盤】" title="14thアルバム Fifty~Fifty 【初回限定盤】"></a><div class="hatena-asin-detail-info"><p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/exec/obidos/ASIN/B0793FCVFJ/ovis91-22/">14thアルバム Fifty~Fifty 【初回限定盤】</a></p><ul><li><span class="hatena-asin-detail-label">アーティスト:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%CE%D3%B8%B6%A4%E1%A4%B0%A4%DF">林原めぐみ</a></li><li><span class="hatena-asin-detail-label">出版社/メーカー:</span> <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AD%A5%F3%A5%B0%A5%EC%A5%B3%A1%BC%A5%C9">キングレコード</a></li><li><span class="hatena-asin-detail-label">発売日:</span> 2018/03/30</li><li><span class="hatena-asin-detail-label">メディア:</span> CD</li><li><a href="http://d.hatena.ne.jp/asin/B0793FCVFJ/ovis91-22" target="_blank">この商品を含むブログ (1件) を見る</a></li></ul></div><div class="hatena-asin-detail-foot"></div></div></p>

<h4>前提</h4>

<p>MusicBrainzでは各リソースごとにMBIDと呼ばれる一意なIDが割り振られています。<br/>
ここでいうリソースとは<br/>
* area<br/>
* artist<br/>
* event<br/>
* instrument<br/>
* label<br/>
* place<br/>
* recording<br/>
* release<br/>
* release-group<br/>
* series
* work<br/>
* url<br/>
の12個の要素のこと。<br/>
詳細は下記を参照。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmusicbrainz.org%2Fdoc%2FMusicBrainz_Entity" title="MusicBrainz Entity - MusicBrainz" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>例えば「<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CE%D3%B8%B6%A4%E1%A4%B0%A4%DF">林原めぐみ</a>」というアーティスト(Artist)のMBIDは「375a3c4c-7898-47f0-ad0e-443a75148c7a」となります。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmusicbrainz.org%2Fartist%2F375a3c4c-7898-47f0-ad0e-443a75148c7a" title="林原めぐみ - MusicBrainz" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>Fifty-Fiftyというアルバム(Release)のMBIDは「69322e7c-0fef-409e-a9f6-b43d7c361398」となります。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmusicbrainz.org%2Frelease%2F69322e7c-0fef-409e-a9f6-b43d7c361398" title="Release “Fifty〜Fifty” by 林原めぐみ - MusicBrainz" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>このアルバムに収録されている「恐山ル・ヴォワール 」という曲(Recording)のMBIDは「b7a7d6d6-b40e-47b0-96a5-208219471bea」。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmusicbrainz.org%2Frecording%2Fb7a7d6d6-b40e-47b0-96a5-208219471bea" title="Recording “恐山ル・ヴォワール” by 恐山アンナ(CV:林原めぐみ) - MusicBrainz" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>発売元(Label)は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AD%A5%F3%A5%B0%A5%EC%A5%B3%A1%BC%A5%C9">キングレコード</a>なのでMBIDは「856ae6ab-e3cb-4e8d-a69b-8269844d50a3」。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmusicbrainz.org%2Flabel%2F925df646-49d9-4280-a0aa-9b61f2350893" title="KING AMUSEMENT CREATIVE - MusicBrainz" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<h5>MBIDがわからない場合のデータ取得方法</h5>

<p>DiscIDと<a class="keyword" href="http://d.hatena.ne.jp/keyword/TOC">TOC</a>をもとに取得できます。<br/>
DiscIDの算出方法は下記のサイトを参照。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmusicbrainz.org%2Fdoc%2FDisc_ID_Calculation" title="Disc ID Calculation - MusicBrainz" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe>
ライブラリも提供されているのでそれを使うのが確実かと。</p>

<p>上記のアルバムの場合、下記で取得できます。</p>

<blockquote><p><a href="https://musicbrainz.org/ws/2/discid/PBk5WCAkltkq49R0Pawn4b_Qe1Y-?toc=1+14+336665+150+23688+56073+88818+114565+135662+158010+184202+211033+224801+238725+265801+284612+313885">https://musicbrainz.org/ws/2/discid/PBk5WCAkltkq49R0Pawn4b_Qe1Y-?toc=1+14+336665+150+23688+56073+88818+114565+135662+158010+184202+211033+224801+238725+265801+284612+313885</a></p></blockquote>

<p>PBk5WCAkltkq49R0Pawn4b_Qe1Y-がDiscID、それ以降の<a class="keyword" href="http://d.hatena.ne.jp/keyword/TOC">TOC</a>のうち、1+14となっている部分が最初のトラックIDと最後のトラックID。<br/>
それ以降が<a class="keyword" href="http://d.hatena.ne.jp/keyword/TOC">TOC</a>ですね。
最初の336665がトラック0にあたり、それ以降トラック1、トラック2・・・トラック14となる模様。</p>

<p>取得できた<a class="keyword" href="http://d.hatena.ne.jp/keyword/XML">XML</a>内の、"release id="の項の値がMBIDとなります。<br/>
なお、上記URLに「&amp;fmt=<a class="keyword" href="http://d.hatena.ne.jp/keyword/json">json</a>」を付けておくと、<a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a>で取得可能。</p>

<h4>CDの情報取得</h4>

<blockquote><p><a href="https://musicbrainz.org/ws/2/release/69322e7c-0fef-409e-a9f6-b43d7c361398">https://musicbrainz.org/ws/2/release/69322e7c-0fef-409e-a9f6-b43d7c361398</a></p></blockquote>

<p>上記の場合、タイトルは取れますが、曲名、アーティスト名などは取れません。<br/>
「inc=」のサブクエリを付けて取得する必要があります。</p>

<p>曲名も含めて取得したい場合</p>

<blockquote><p><a href="https://musicbrainz.org/ws/2/release/69322e7c-0fef-409e-a9f6-b43d7c361398?inc=recordings">https://musicbrainz.org/ws/2/release/69322e7c-0fef-409e-a9f6-b43d7c361398?inc=recordings</a></p></blockquote>

<p>のように、「?inc=recordings」を付けることで取得可能。</p>

<p>複数のサブクエリを用いる場合は「+」で区切る。</p>

<p>例)</p>

<blockquote><p><a href="https://musicbrainz.org/ws/2/release/69322e7c-0fef-409e-a9f6-b43d7c361398?inc=recordings+labels+artists+artist-credits">https://musicbrainz.org/ws/2/release/69322e7c-0fef-409e-a9f6-b43d7c361398?inc=recordings+labels+artists+artist-credits</a></p></blockquote>

<p>これだとアルバム全体のアーティスト、発売元、曲情報(曲ごとのアーティスト情報も含む)が取得可能。</p>

<h4>曲の情報取得</h4>

<blockquote><p><a href="https://musicbrainz.org/ws/2/recording/ed015f01-1494-45ca-baa3-dc5a3196e744">https://musicbrainz.org/ws/2/recording/ed015f01-1494-45ca-baa3-dc5a3196e744</a></p></blockquote>

<p>上記だとタイトルのみ。<br/>
「?inc=artists」を付けることでアーティスト名も取得可能。<br/>
「?inc=releases」を付けることでどのCDに収録されているかが取得可能。</p>

<h4>アルバムアート(カバーアート)の取得</h4>

<p>CDのアルバムアートが取得可能。</p>

<blockquote><p><a href="http://coverartarchive.org/release/69322e7c-0fef-409e-a9f6-b43d7c361398">http://coverartarchive.org/release/69322e7c-0fef-409e-a9f6-b43d7c361398</a></p></blockquote>

<p>CDのMBIDを渡すと<a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a>形式でURLが取得可能。<br/>
CDによってはパッケージの前面背面だけでなく、ブックレットやCDレーベルも取得可能な模様。<br/>
・・・ブックレットはさすがにまずいと思うんですが、いいんかこれ・・・。</p>

<p>前面、背面を指定したい場合は</p>

<blockquote><p><a href="http://coverartarchive.org/release/69322e7c-0fef-409e-a9f6-b43d7c361398/front">http://coverartarchive.org/release/69322e7c-0fef-409e-a9f6-b43d7c361398/front</a></p></blockquote>

<p>のように、前面なら「front」、背面なら「back」と末尾につければOK。<br/>
これだと(存在する場合はですが ）直接画像が取得されます。</p>

<h5>参考</h5>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdev.classmethod.jp%2Ftool%2Fmusic-brainz%2F" title="オープンな音楽データベース「MusicBrainz」のマッシュアップサービスを作るための使い方まとめ | DevelopersIO" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmusicbrainz.org%2Fdoc%2FDevelopment%2FJSON_Web_Service" title="Development / JSON Web Service - MusicBrainz" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmusicbrainz.org%2Fdoc%2FDevelopment%2FXML_Web_Service%2FVersion_2" title="Development / XML Web Service / Version 2 - MusicBrainz" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fmusicbrainz.org%2Fdoc%2FCover_Art_Archive%2FAPI" title="Cover Art Archive / API - MusicBrainz" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>
