---
Title: .NET CoreでShift-JISを取り扱う方法
Published: 2019/01/27 20:00:55
Tags:
  - "プログラミング"
Eyecatch: ""
---
<p>.NET CoreではShift-JISがそのままでは利用できない。</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/.NET%20Framework">.NET Framework</a>で作成していた時は問題なく動いていたプログラムをそのまま移植すると、</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="20190127194150.png" alt="f:id:Ovis:20190127194150p:plain" title="f:id:Ovis:20190127194150p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<blockquote><p>ArgumentException: '<a class="keyword" href="http://d.hatena.ne.jp/keyword/shift_jis">shift_jis</a>' is not a supported encoding name. For information on defining a custom encoding, see the documentation for the Encoding.RegisterProvider method.</p></blockquote>

<p>と怒られる。</p>

<h4>対策</h4>

<p>エラーメッセージにある通り、カスタム<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%F3%A5%B3%A1%BC%A5%C7%A5%A3%A5%F3%A5%B0">エンコーディング</a>を登録してやる必要がある。</p>

<p>NuGetから<a href="https://www.nuget.org/packages/System.Text.Encoding.CodePages/">System.Text.Encoding.CodePages</a>を参照し、</p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="20190127194316.png" alt="f:id:Ovis:20190127194316p:plain" title="f:id:Ovis:20190127194316p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p>コードのどこか(Shift-JIS処理するより前)に下記を挿入。</p>

<blockquote><p>Encoding.RegisterProvider(CodePagesEncodingProvider.Instance);</p></blockquote>

<p>これでShift-JISが正常に利用できる。</p>

<p>UWPとかやっていた方<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A4%AB%A4%E9%A4%B7">からし</a>たら基本的な知識なのかも。</p>

<p>いい加減Shift-JISを利用したサイト滅びてくれないかな・・・。</p>

***