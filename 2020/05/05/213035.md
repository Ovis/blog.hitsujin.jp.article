---
Title: MQTTHomeClientをプラグインで機能拡張できるように改良した
Published: 2020/05/05 21:30:35
Tags:
  - "プログラミング"
Eyecatch: ""
---
<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fblog.hitsujin.jp%2Fentry%2F2020%2F05%2F05%2F150000" title="「Ok Google,パソコンの電源を入れて」 を実現したい(IFTTT、MQTT、Raspberry Piを用いる方法) - Pandora Pocket" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe>
この記事で作っていたMQTTHomeClient。<br />
MQTT Brokerから受け取ったTopicから処理を分岐させるんですが、ここで呼び出す<a class="keyword" href="http://d.hatena.ne.jp/keyword/WakeOnLAN">WakeOnLAN</a>の処理をプロジェクト内で実装しています。<br />
どうせ私しか使わないんでべたべた書いてもいいんですが、勉強がてらMQTTのクライアントの機能拡張をDLL追加でできるように改良してみました。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2FOvis%2FMqttHomeClient" title="Ovis/MqttHomeClient" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

***

<p>まぁ参考サイトのコードをコピペｹﾞﾌﾝｹﾞﾌﾝ採用させてもらって、<a class="keyword" href="http://d.hatena.ne.jp/keyword/WakeOnLAN">WakeOnLAN</a>の処理を外部プロジェクトのクラスライブラリ側に寄せただけです。</p>

<p>Interfaceを定義してやって、DLL側とプログラム側でInterfaceに沿った処理を突っ込むだけなので、割と簡単に実装できますね。いやまぁInterfaceの設計が多分一番大変なんでしょうけども。バージョンアップごとに変わっていったら<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>の追従が死ぬので。</p>

<h4>参考サイト</h4>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fone-sthead.hatenablog.com%2Fentry%2F2019%2F09%2F10%2F180130" title="C#でのPlugin機能の実装 - One Step Ahead" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe></p>
