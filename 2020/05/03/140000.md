---
Title: Visual StudioでのASP.NET Core開発時のスマホ検証用にlocalhost外のアクセスができるようにする
Published: 2020/05/03 14:00:00
Tags:
  - "プログラミング"
  - "ASP.NET"
Eyecatch: ""
---
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Visual%20Studio">Visual Studio</a>で<a class="keyword" href="http://d.hatena.ne.jp/keyword/ASP.NET">ASP.NET</a> Coreの開発をする際、開発マシンでの検証だけでなく、<a class="keyword" href="http://d.hatena.ne.jp/keyword/iPhone">iPhone</a>や<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>での表示を確認したい時があります。</p>

<p>標準だと <code>localhost</code> で指定されており、そのままでは外部からアクセスはできないため、設定する必要があるのでメモ。</p>

<h4>前提</h4>

<p>ファイアーウォールで該当ポートが解放されていること。</p>

<h4>launchSettings.<a class="keyword" href="http://d.hatena.ne.jp/keyword/json">json</a>での指定</h4>

<p><code>launchSettings.json</code> のapplicationUrlは初期設定では<a class="keyword" href="http://d.hatena.ne.jp/keyword/localhost">localhost</a>になっているので、ここを開発マシンのプライベート<a class="keyword" href="http://d.hatena.ne.jp/keyword/IP%A5%A2%A5%C9%A5%EC%A5%B9">IPアドレス</a>に変更。<br />
<script src="https://gist.github.com/Ovis/113cbb2d747bd8e7b5e2f29a188af2c2.js"> </script></p>

<p>この方法、なぜか<code>launchBrowser</code>をtrueにしてるのに起動しない謎。</p>

<h4>appsettings.<a class="keyword" href="http://d.hatena.ne.jp/keyword/json">json</a>での指定</h4>

<p>こちらのほうがおすすめ。</p>

<p><code>appsettings.json</code>または<code>appsettings.Development.json</code>に <code>urls</code> で <code>http://*:5000;https://*:5001</code> を指定。<br />
こちらだとホスト名が<a class="keyword" href="http://d.hatena.ne.jp/keyword/localhost">localhost</a>だろうが開発マシンの<a class="keyword" href="http://d.hatena.ne.jp/keyword/IP%A5%A2%A5%C9%A5%EC%A5%B9">IPアドレス</a>だろうが行けるので便利。</p>

<p><script src="https://gist.github.com/Ovis/0fe6306068966ef617992ea82ff6f313.js"> </script></p>

<h4>そのほか</h4>

<p><code>CreateHostBuilder</code> で <code>UseUrls</code>に指定する方法があるんですが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>に書くのはちょっと・・・。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdocs.microsoft.com%2Fja-jp%2Faspnet%2Fcore%2Ffundamentals%2Fhost%2Fweb-host%3Fview%3Daspnetcore-3.0%23server-urls" title="ASP.NET Core の Web ホスト" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

***