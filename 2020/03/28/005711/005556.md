---
Title: jQuery Validationを考慮したJavaScript制御の多重送信防止処理
Published: 9999/12/31 23:59:59
Tags:
  - "プログラミング"
Eyecatch: ""
---
<p>フォームの送信ボタン、一回押せば処理されるわけですが、次のページに遷移する前に何度もクリックすると、その分処理がサーバー側に送られてしまいます。</p>

<p>多重送信させないようにする方法はいろいろありますね。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fsyobochim%2Fitems%2F120109315f671918f28d" title="さいきょうの二重サブミット対策 - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p>中でも一番簡単な対応が<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>を利用して送信ボタンを無効化させる方法になるかと思います。</p>

<p>onSubmitやclickイベントの発火時にボタンをdisableにするか、<a class="keyword" href="http://d.hatena.ne.jp/keyword/CSS">CSS</a>で<code>pointer-events</code>にnone指定してやる形です。</p>

<p>ただ、単純にクリックしたら即無効化としてしまうと、クライアントサイドのバリデーション処理で仮にエラーになったとしてもそれ以降送信ボタンを押せなくなってしまいます。</p>

<p>今回<a class="keyword" href="http://d.hatena.ne.jp/keyword/ASP.NET">ASP.NET</a> での対応時、<a class="keyword" href="http://d.hatena.ne.jp/keyword/jQuery">jQuery</a> Validation<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>によるクライアントサイドバリデーションがあったので、バリデーションに引っかかった場合は送信可能に、バリデーションを通った場合はボタンを無効化する処理をする<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>をこしらえました。</p>

<p><script src="https://gist.github.com/Ovis/1f4a4120eb0e8d03ec65e7604ff14fe5.js"> </script></p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/jQuery">jQuery</a> Validationも<a class="keyword" href="http://d.hatena.ne.jp/keyword/jQuery">jQuery</a>も使っていないHTMLも想定して、多重送信防止処理自体はピュアJSです。<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/jQuery">jQuery</a>および<a class="keyword" href="http://d.hatena.ne.jp/keyword/jQuery">jQuery</a> Validationが読み込まれている場合のみ、バリデーションを考慮する処理が適用されます。</p>

<h4>参考サイト</h4>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2FShikaTech%2Fitems%2Fd6ca805dbd6edb1b125a" title="ASP.NET Core で追加されるjQuery Validation UnobtrusiveのInvalidハック - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fyutaihara.com%2Farchives%2F569" title="Javascriptで送信ボタン二度押しによる二重送信を防止する方法 | Yuta Ihara.com" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe></p>

***