---
Title: SQLのWHERE 1=1と WHERE 1=0について
Published: 2020/02/14 21:00:00
Tags:
  - "備忘録"
  - "プログラミング"
Eyecatch: ""
---
<p>たまに使うのにどう使うのかを<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C5%D9%CB%BA%A4%EC">度忘れ</a>することがあるので備忘録。</p>

<h4>前提</h4>

<p>テーブルから値を取得する際の条件としてWHERE句を設定するが、検索対象によってWHERE句に指定する検索条件が増減しうる。</p>

<p>例えば生徒の情報(氏名、性別等)を保持するテーブル <code>STUDENT</code> があったとして、全件取得したければ条件を付ける必要がないので</p>

<blockquote><p>SELECT * FROM STUDENT</p></blockquote>

<p>で済む。<br />
これに対し氏名の姓だけを検索条件に加えるなら</p>

<blockquote><p>SELECT * FROM STUDENT
WHERE 氏名 LIKE '(姓)%'</p></blockquote>

<p>となる。<br />
プログラムでデータを取得する場合、条件の組み合わせごとに<a class="keyword" href="http://d.hatena.ne.jp/keyword/SQL">SQL</a>をそれぞれ用意するような非効率なことはしたくないので、<code>WHERE</code> 以降の検索条件を動的につなげたい。<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/SQL">SQL</a>は検索条件がない場合は <code>WHERE</code> があるとエラーになるため、検索条件がある場合と検索条件がない場合で条件分岐が必要になる。<br />
この時に便利なのが(1=1)、(1=0)となる。</p>

<h4>WHERE (1=1)</h4>

<p>1=1は当然正しいのでtrue。</p>

<blockquote><p>SELECT * FROM STUDENT
WHERE (1=1)</p></blockquote>

<p>この場合、(1=1)が検索条件となり、必ずtrueであるため、STUDENTテーブル上のすべてのレコードを取得することになる。</p>

<p>検索条件が存在する場合、</p>

<blockquote><p>SELECT * FROM STUDENT
WHERE (1=1)<br />
AND 氏名 LIKE '(姓)%'</p></blockquote>

<p>のように(1=1)以降にANDで条件を追加していけば良い。</p>

<p>なお<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>ではWHERE 1 でも同じことになる模様。</p>

<h4>WHERE (1=0)</h4>

<p>(1=1)の場合、以降に検索条件がなければ全件取得されるが、条件がない場合は一件も値を取得してほしくない場合もある。<br />
その場合は(1=0)を用いる。</p>

<blockquote><p>SELECT * FROM STUDENT
WHERE (1=0)</p></blockquote>

<p>この場合、(1=0)はfalseであるため、STUDENTテーブル上のレコードを1件も取得しない。</p>

<blockquote><p>SELECT * FROM STUDENT
WHERE (1=0)<br />
OR 氏名 LIKE '(姓)%'</p></blockquote>

<p>のように、OR (検索条件) として条件を付与することで、検索条件に適合するレコードがあればそれだけを取得する。</p>

<p>なお、bool値としてfalseになればいいわけなので、別に(2=0)でもなんでもよい。<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>なら0でもOK。が、ややこしいので(1=0)にするのが無難。</p>

***